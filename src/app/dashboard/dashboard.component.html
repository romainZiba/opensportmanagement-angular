<div class="container mt-3">
  <mat-form-field>
    <mat-select placeholder="Select your team" [(value)]="selectedTeam" (selectionChange)="changeTeam()">
      <mat-option *ngFor="let team of teams" [value]="team">{{team.name}}</mat-option>
    </mat-select>
  </mat-form-field>

  <mat-paginator [length]="totalElements"
                 [pageSize]="pageSize"
                 [pageIndex]="currentPage"
                 [pageSizeOptions]="[10, 25, 50]"
                 (page)="loadEvents($event.pageIndex, $event.pageSize)">
  </mat-paginator>

  <div *ngIf="selectedTeam">
    <div class="list-group">
      <div class="list-group-item flex-column align-items-start" *ngFor="let event of events"
           [ngSwitch]="isUserPresent(event)">

        <div class="d-flex justify-content-between">
          <h5>{{event.name}}</h5>
          <span>{{event.presentMembers.length}} participants</span>

        </div>
        <p>{{ event.fromDate | date:'fullDate':'':'fr' }}</p>
        <p>{{ event.fromDate | date:'shortTime':'':'fr' }}</p>

        <div class="d-flex justify-content-center" *ngIf="event.done != null">
          <p class="align-self-center">{{event.localTeamName}}</p>
          <img class="img-fluid mr-3" src="{{event.localTeamImgUrl}}">
          <p class="align-self-center" *ngIf="event.done">{{event.localTeamScore}}</p>
          <p class="align-self-center" *ngIf="event.done">{{event.visitorTeamScore}}</p>
          <p class="align-self-center" *ngIf="!event.done">VS</p>

          <img class="img-fluid ml-3" src="{{event.visitorTeamImgUrl}}">
          <p class="align-self-center">{{event.visitorTeamName}}</p>
        </div>

        <div class="d-flex justify-content-end mt-2">
          <button mat-raised-button button *ngSwitchCase="presence.Absent" (click)="participate(event._id, true)">PLAY</button>
          <button mat-raised-button *ngSwitchCase="presence.Present" (click)="participate(event._id, false)">WITHDRAW</button>
          <button mat-raised-button *ngSwitchDefault (click)="participate(event._id, true)">PLAY</button>
          <button class="ml-2" mat-raised-button (click)="showDetails(event._id)">DETAILS</button>
        </div>
      </div>
    </div>
  </div>
</div>
