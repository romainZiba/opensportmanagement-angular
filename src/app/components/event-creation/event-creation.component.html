<form class="container" [formGroup]="form"
      (ngSubmit)="onSaveEvent(eventNameControl.value, seasonControl.value, championshipControl.value,
       recurrentControl.value, daysControl.value, fromDateControl.value, fromTimeControl.value, toDateControl.value,
       toTimeControl.value, kindOfMatchControl.value, placeControl.value, opponentControl.value)">
  <div class="row">
    <div class="col-12">
      <mat-form-field>
        <input matInput type="text" i18n-placeholder="@@event-name" placeholder="Name of the event"
               formControlName="eventNameControl" required>
        <mat-error i18n="@@name-required" *ngIf="eventNameControl.hasError('required')">
          Name is <strong>required</strong>
        </mat-error>
      </mat-form-field>
    </div>
  </div>
  <div *ngIf="isEventMatch()" class="row align-items-center">
    <div class="col-12">
      <mat-form-field class="mr-1">
        <mat-select i18n-placeholder="@@season"
                    placeholder="Season" formControlName="seasonControl">
          <mat-option *ngFor="let season of seasons" [value]="season._id">
            {{ season.name }}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <button type="button" mat-button mat-icon-button aria-label="Add" (click)="onCreateSeason()">
        <mat-icon>add_circle_outline</mat-icon>
      </button>
    </div>
  </div>
  <div *ngIf="isEventMatch()" class="row align-items-center">
    <div class="col-12">
      <mat-form-field class="mr-1">
        <mat-select i18n-placeholder="@@championship"
                    placeholder="Championship" formControlName="championshipControl"
                    [disabled]="seasonControl.value === null">
          <mat-option *ngFor="let ch of championships" [value]="ch._id">
            {{ ch.name }}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <button type="button" mat-button mat-icon-button aria-label="Add" (click)="onCreateChampionship()">
        <mat-icon>add_circle_outline</mat-icon>
      </button>
    </div>
  </div>
  <div class="row">
    <div class="col-12">
      <mat-checkbox formControlName="recurrentControl">
        <ng-container i18n="@@recurrent">Recurrent</ng-container>
      </mat-checkbox>
    </div>
  </div>
  <div *ngIf="recurrentControl.value" class="row">
    <div class="col-12">
      <mat-form-field>
        <mat-select i18n-placeholder="@@days-week"
                    placeholder="Days of week" formControlName="daysControl" multiple required>
          <mat-option *ngFor="let dayOfWeek of daysOfWeek" [value]="dayOfWeek.id">{{dayOfWeek.name}}</mat-option>
        </mat-select>
        <mat-error i18n="@@daysOfWeekRequired" *ngIf="daysControl.hasError('required')">
          At least one day must be selected
        </mat-error>
      </mat-form-field>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-6 align-items-end">
      <mat-form-field>
        <input matInput type="date" i18n-placeholder="@@start-date" placeholder="Start date"
               formControlName="fromDateControl">
        <mat-error i18n="@@startDateRequired" *ngIf="fromDateControl.hasError('required')">
          Start date is <strong>required</strong>
        </mat-error>
        <mat-error i18n="@@startDateLowerThanMinDate" *ngIf="fromDateControl.hasError('minDate')">
          Start date must be greater than current date
        </mat-error>
      </mat-form-field>
    </div>
    <div class="col-sm-1"></div>
    <div class="col-sm-5">
      <mat-form-field>
        <input matInput type="time" pattern="[0-9]{2}:[0-9]{2}"
               i18n-placeholder="@@start-time" placeholder="Start time" formControlName="fromTimeControl">
      </mat-form-field>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-6 align-items-end">
      <mat-form-field>
        <input matInput type="date" i18n-placeholder="@@end-date" placeholder="End date"
               formControlName="toDateControl">
      </mat-form-field>
    </div>
    <div class="col-sm-1"></div>
    <div class="col-sm-5">
      <mat-form-field>
        <input matInput type="time" pattern="[0-9]{2}:[0-9]{2}"
               i18n-placeholder="@@end-time" placeholder="End time" formControlName="toTimeControl">
      </mat-form-field>
    </div>
  </div>
  <div *ngIf="isEventMatch()" class="row">
    <div class="col-12">
      <mat-radio-group formControlName="kindOfMatchControl">
        <mat-radio-button class="example-radio-button" *ngFor="let season of kindOfMatch" [value]="season">
          {{season}}
        </mat-radio-button>
      </mat-radio-group>
    </div>
  </div>
  <div *ngIf="placesByGroup" class="row">
    <div class="col-12">
      <mat-form-field class="mr-1">
        <mat-select i18n-placeholder="@@place"
                    placeholder="Place" formControlName="placeControl">
          <mat-optgroup *ngFor="let key of objectKeys(placesByGroup)" [label]="key">
            <mat-option *ngFor="let place of placesByGroup[key]" [value]="place._id">
              {{ place.name }}
            </mat-option>
          </mat-optgroup>
        </mat-select>
      </mat-form-field>
      <button type="button" mat-button mat-icon-button aria-label="Add" (click)="onCreatePlace()">
        <mat-icon>add_circle_outline</mat-icon>
      </button>
    </div>
  </div>
  <div *ngIf="isEventMatch()" class="row align-items-center">
    <div class="col-12">
      <mat-form-field class="mr-1">
        <mat-select i18n-placeholder="@@opponent"
                    placeholder="Opponent" formControlName="opponentControl">
          <mat-option *ngFor="let opponent of opponents" [value]="opponent._id">
            {{ opponent.name }}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <button type="button" mat-button mat-icon-button aria-label="Add" (click)="onCreateOpponent()">
        <mat-icon>add_circle_outline</mat-icon>
      </button>
    </div>
  </div>
  <div class="row">
    <div class="col-12">
      <button type="submit" i18n="@@save" [disabled]="!form.valid" mat-raised-button color="primary">SAVE</button>
    </div>
  </div>
</form>
