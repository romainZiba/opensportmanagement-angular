<div class="container">
  <div class="row">
    <div class="col-12">
      <mat-form-field>
        <input matInput i18n-placeholder="@@event-name" placeholder="Name of the event"
               [formControl]="nameControl"
               [errorStateMatcher]="nameMatcher">
        <mat-error *ngIf="nameControl.hasError('required')">
          <ng-container i18n="@@name-required">Name is <strong>required</strong></ng-container>
        </mat-error>
      </mat-form-field>
    </div>
  </div>
  <div class="row">
    <div class="col-12">
      <mat-checkbox [(ngModel)]="recurrentEvent">
        <ng-container i18n="@@recurrent">Recurrent</ng-container>
      </mat-checkbox>
    </div>
  </div>
  <div *ngIf="recurrentEvent" class="row">
    <div class="col-12">
      <mat-form-field>
        <mat-select i18n-placeholder="@@days-week"
                    placeholder="Days of week" [(value)]="selectedDays" [formControl]="daysControl" multiple>
          <mat-option *ngFor="let dayOfWeek of daysOfWeek" [value]="dayOfWeek">{{dayOfWeek}}</mat-option>
        </mat-select>
      </mat-form-field>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-6 align-items-end">
      <mat-form-field class="mr-5">
        <input matInput i18n-placeholder="@@start-date" placeholder="Start date"
               [min]="minDate"
               [matDatepicker]="startDatePicker"
               [formControl]="fromDateControl">
        <mat-datepicker-toggle matSuffix [for]="startDatePicker"></mat-datepicker-toggle>
        <mat-datepicker #startDatePicker></mat-datepicker>
      </mat-form-field>
    </div>
    <div class="col-sm-6">
      <mat-form-field>
        <input matInput type="time" pattern="[0-9]{2}:[0-9]{2}"
               i18n-placeholder="@@start-time" placeholder="Start time" [formControl]="fromTimeControl">
      </mat-form-field>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-6 align-items-end">
      <mat-form-field class="mr-5">
        <input matInput i18n-placeholder="@@end-date" placeholder="End date"
               [min]="fromDateControl.value"
               [matDatepicker]="endDatePicker"
               [formControl]="toDateControl"
               [errorStateMatcher]="toDateMatcher">
        <mat-datepicker-toggle matSuffix [for]="endDatePicker"></mat-datepicker-toggle>
        <mat-datepicker #endDatePicker></mat-datepicker>
        <mat-error *ngIf="toDateControl.hasError('invalid-date')">
          <ng-container i18n="@@todate-greater-fromdate">To date must be <strong>greater</strong> than from date</ng-container>
        </mat-error>
      </mat-form-field>
    </div>
    <div class="col-sm-6">
      <mat-form-field>
        <input matInput type="time" pattern="[0-9]{2}:[0-9]{2}"
               i18n-placeholder="@@end-time" placeholder="End time" [formControl]="toTimeControl">
      </mat-form-field>
    </div>
  </div>
  <div *ngIf="eventType === 'match'" class="row">
    <div class="col-12">
      <mat-radio-group [(ngModel)]="selectedKindOfMatch">
        <mat-radio-button class="example-radio-button" *ngFor="let season of kindOfMatch" [value]="season">
          {{season}}
        </mat-radio-button>
      </mat-radio-group>
    </div>
  </div>
  <div *ngIf="placesByGroup" class="row">
    <div class="col-12">
      <mat-form-field class="mr-1">
        <mat-select i18n-placeholder="@@place"
                    placeholder="Place" [formControl]="placeControl" [(value)]="selectedPlaceId">
          <mat-optgroup *ngFor="let key of objectKeys(placesByGroup)" [label]="key">
            <mat-option *ngFor="let place of placesByGroup[key]" [value]="place._id">
              {{ place.name }}
            </mat-option>
          </mat-optgroup>
        </mat-select>
      </mat-form-field>
      <button mat-button mat-icon-button aria-label="Add" (click)="createPlace()">
        <mat-icon>add_circle_outline</mat-icon>
      </button>
    </div>
  </div>
  <div *ngIf="eventType === 'match'" class="row align-items-center">
    <div class="col-12">
      <mat-form-field class="mr-1">
        <mat-select i18n-placeholder="@@opponent"
                    placeholder="Opponent" [formControl]="opponentControl" [(value)]="selectedOpponentId">
          <mat-option *ngFor="let opponent of opponents" [value]="opponent._id">
            {{ opponent.name }}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <button mat-button mat-icon-button aria-label="Add" (click)="createOpponent()">
        <mat-icon>add_circle_outline</mat-icon>
      </button>
    </div>
  </div>
  <div class="row">
    <div class="col-12">
      <button i18n="@@cancel" class="mr-2" mat-raised-button color="primary">CANCEL</button>
      <button i18n="@@save" mat-raised-button color="primary" (click)="saveEvent()">SAVE</button>
    </div>
  </div>
</div>
